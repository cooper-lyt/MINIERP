<components xmlns="http://jboss.org/schema/seam/components"
            xmlns:core="http://jboss.org/schema/seam/core"
            xmlns:persistence="http://jboss.org/schema/seam/persistence"
            xmlns:drools="http://jboss.org/schema/seam/drools"
            xmlns:bpm="http://jboss.org/schema/seam/bpm"
            xmlns:security="http://jboss.org/schema/seam/security"
            xmlns:mail="http://jboss.org/schema/seam/mail"
            xmlns:web="http://jboss.org/schema/seam/web"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xsi:schemaLocation=
                    "http://jboss.org/schema/seam/core http://jboss.org/schema/seam/core-2.3.xsd
                 http://jboss.org/schema/seam/persistence http://jboss.org/schema/seam/persistence-2.3.xsd
                 http://jboss.org/schema/seam/drools http://jboss.org/schema/seam/drools-2.3.xsd
                 http://jboss.org/schema/seam/bpm http://jboss.org/schema/seam/bpm-2.3.xsd
                 http://jboss.org/schema/seam/security http://jboss.org/schema/seam/security-2.3.xsd
                 http://jboss.org/schema/seam/mail http://jboss.org/schema/seam/mail-2.3.xsd
                 http://jboss.org/schema/seam/web http://jboss.org/schema/seam/web-2.3.xsd
                 http://jboss.org/schema/seam/components http://jboss.org/schema/seam/components-2.3.xsd">


    <persistence:managed-persistence-context name="erpEntityManager" auto-create="true"
                                             persistence-unit-jndi-name="java:/erpEntityManagerFactory"/>

    <component name="erpEntityConverter" scope="conversation" precedence="20"
               class="org.jboss.seam.ui.EntityConverter">
        <property name="entityLoader">#{erpEntityLoader}</property>
    </component>

    <component name="allStoreList" class="com.dgsoft.erp.ErpEntityQuery" scope="event">
        <property name="ejbql">select store from Store store</property>
    </component>

    <component name="storeList" class="com.dgsoft.erp.ErpEntityQuery" scope="event">
        <property name="ejbql">select store from Store store where store.enable = true</property>
    </component>

    <component name="unitGroupList" class="com.dgsoft.erp.ErpEntityQuery" scope="conversation">
        <property name="ejbql">select distinct unitGroup from UnitGroup unitGroup left join fetch unitGroup.resUnits</property>
    </component>

    <component name="customerAreaList" class="com.dgsoft.erp.ErpEntityQuery" scope="conversation">
        <property name="ejbql">select ca from CustomerArea ca</property>
    </component>

    <component name="customerList" class="com.dgsoft.erp.ErpEntityQuery" scope="event">
        <property name="ejbql">select customer from Customer customer where customer.enable = true and customer.customerArea.id = &apos;#{customerAreaHome.id}&apos;</property>
    </component>

    <component name="customerAreaList" class="com.dgsoft.erp.ErpEntityQuery" scope="conversation">
        <property name="ejbql">select customerArea from CustomerArea customerArea</property>
    </component>

    <component name="customerLevelList" class="com.dgsoft.erp.ErpEntityQuery" scope="conversation">
        <property name="ejbql">select customerLevel from CustomerLevel customerLevel order by customerLevel.priority</property>
    </component>
</components>