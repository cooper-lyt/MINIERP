<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich" xmlns:a="http://richfaces.org/a4j"
                template="/layout/full-template.xhtml">


    <ui:param name="functionTitle" value="#{messages[customerAccountOper.type.name()]}"/>

    <ui:define name="func-body">
        <h:form>

            <rich:toolbar>
                <rich:toolbarGroup location="right">
                    <s:button styleClass="toolBarBtn" value="#{messages.cancel}" action="cancel"/>
                    <h:commandButton styleClass="toolBarBtn" action="customer"
                                     value="#{messages.Next}"/>

                    <h:commandButton styleClass="toolBarBtn" action="order"
                                     value="#{messages.Next}"/>
                </rich:toolbarGroup>
            </rich:toolbar>

            <rich:messages ajaxRendered="true" globalOnly="true"/>


            <br/>

            <s:decorate id="operDateField" template="/layout/seam-edit.xhtml">
                <ui:define name="label">
                    #{messages.accountOper_field_operDate}
                </ui:define>
                <rich:calendar
                        enableManualInput="true"
                        inputSize="20"
                        timeZone="#{calendarBean.timeZone}" locale="#{calendarBean.locale}"
                        showApplyButton="#{calendarBean.showApply}" popup="#{calendarBean.popup}"
                        datePattern="#{messages.datetimepattern}"
                        required="true"
                        defaultTime="#{currentTime}"
                        label="#{messages.accountOper_field_operDate}"
                        value="#{customerAccountOper.operDate}" validator="operDateValidator">

                </rich:calendar>

            </s:decorate>

            <ui:include src="/layout/erp/biz/PayTypeSelect.xhtml">
                <ui:param name="moneySave" value="#{moneySaveHome.instance}"/>
            </ui:include>

            <s:decorate id="operMoneyField" template="/layout/seam-edit.xhtml">
                <ui:define name="label">#{messages.accountOper_field_operMoney}</ui:define>
                <h:inputText value="#{customerAccountOper.operMoney}"
                             label="#{messages.accountOper_field_operMoney}"
                             converter="javax.faces.BigDecimal" required="true">
                    <f:validateDoubleRange minimum="0.01"/>
                    <a:ajax event="blur" execute="@this" render="operMoneyField"/>
                    <f:convertNumber type="currency" locale="#{calendarBean.locale}" groupingUsed="false"
                                     currencySymbol=""/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="remitFeeField" template="/layout/seam-edit.xhtml">
                <ui:define name="label">#{messages.accountOper_field_fee}</ui:define>
                <h:inputText value="#{moneySaveHome.instance.remitFee}"
                             label="#{messages.accountOper_field_fee}"
                             required="true"
                             converter="javax.faces.BigDecimal">
                    <f:validateDoubleRange minimum="0"/>
                    <a:ajax event="blur" execute="@this" render="remitFeeField"/>
                    <f:convertNumber type="currency" locale="#{calendarBean.locale}" groupingUsed="false"
                                     currencySymbol=""/>
                </h:inputText>
            </s:decorate>


        </h:form>


        <div style="clear:both">
        </div>
        <br/>

    </ui:define>

</ui:composition>