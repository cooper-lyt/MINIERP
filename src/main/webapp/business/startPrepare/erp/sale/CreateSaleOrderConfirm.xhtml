<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich" xmlns:a="http://richfaces.org/a4j"
                template="/layout/full-template.xhtml">


<ui:param name="functionTitle" value="#{messages.createOrder}-#{messages.orderItem}"/>

<ui:define name="func-body">
<script type="text/javascript" src="#{facesContext.externalContext.requestContextPath}/js/ZeroClipboard.js"/>


<h:outputStylesheet>
    .barOrderNumber {
        height: 14px;
        width: 100px;
    }
</h:outputStylesheet>


<rich:toolbar>


    <rich:toolbarGroup>

        <h:graphicImage value="/img/qq.png"/>
        <a id="clip-button-id" href="#" data-clipboard-text="#{orderCreate.toastMessages}"
           class="clipboard">
            #{messages.toastQQ}
        </a>

    </rich:toolbarGroup>


    <rich:toolbarGroup location="right">
        <h:form>
            <a:outputPanel ajaxRendered="true">


                <h:panelGroup>


                    <s:button value="#{messages.Previous}"
                              view="/business/startPrepare/erp/sale/CreateSaleOrderMoney.xhtml">
                        <f:param name="from" value="#{from}"/>
                    </s:button>

                    <s:button value="#{messages.cancel}" propagation="end" includePageParams="false"
                              view="#{empty from ? '/func/system/business/start.xhtml' : from}"/>

                    <h:commandButton styleClass="toolBarBtn" value="#{messages.createOrder}"
                                     action="#{businessCreate.create}"/>
                </h:panelGroup>

            </a:outputPanel>
        </h:form>
    </rich:toolbarGroup>
</rich:toolbar>

<rich:messages ajaxRendered="true" globalOnly="false"/>

<br/>

    <s:decorate template="/layout/seam-display.xhtml">
        <ui:define name="label">#{messages.order_field_id}</ui:define>
        <h:outputText value="#{orderCreate.instance.id}"/>
    </s:decorate>


<a:outputPanel>
    <script type="text/javascript">

        ZeroClipboard.setDefaults({ moviePath: '#{facesContext.externalContext.requestContextPath}/js/ZeroClipboard.swf' });

        $('a.clipboard').each(function () {
            var clip = new ZeroClipboard($(this));


            clip.on('complete', function (client, args) {


                window.open(
                        "http://shang.qq.com/wpa/qunwpa?idkey=#{runParam.getStringParamValue('erp.dispatch.QQKey')}"
                        ,
                        'newwindow',
                        ' top=0,left=0, toolbar=no, menubar=no,location=no, status=no,resizable yes,fullscreen no'
                );


            });
        });


    </script>
</a:outputPanel>

</ui:define>

</ui:composition>