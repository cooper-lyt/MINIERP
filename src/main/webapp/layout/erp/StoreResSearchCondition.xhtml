<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:a="http://richfaces.org/a4j"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:rich="http://richfaces.org/rich">

    <h:outputStylesheet>

        .floatConvertRateWidth {
            width: 60px !important;
        }

        .floatConvertRatePopupHeight {
            width: 74px !important;
        }
    </h:outputStylesheet>



    <a:region>
        <h:panelGrid id="resSearchForm" columns="4">

            <h:inputText styleClass="barOrderNumber"
                         label="#{messages.res_field_code}"
                         id="resItemCode" value="#{resLocate.code}"
                         required="true">
                <rich:placeholder value="#{messages.res_field_code}"/>
            </h:inputText>


            <a:commandButton value="#{messages.search}" execute="@region"
                             action="#{resLocate.locateByCode}">
                <a:attachQueue requestDelay="0"/>
                <s:conversationPropagation type="join"/>
            </a:commandButton>

            <a:commandButton image="/img/onetomany.gif" execute="@this" immediate="true"
                             title="#{messages.resSelect}" render="resSelectPanel_form"
                             onclick="#{rich:component('resSelectPanel')}.show();">
                <a:attachQueue requestDelay="0"/>
                <s:conversationPropagation type="join"/>
            </a:commandButton>

            <a:commandButton image="/img/onetomany.gif" execute="@this" immediate="true"
                             title="#{messages.storeResSelect}" render="storeResSelectPanel_form"
                             onclick="#{rich:component('storeResSelectPanel')}.show();">
                <a:attachQueue requestDelay="0"/>
                <s:conversationPropagation type="join"/>
            </a:commandButton>
        </h:panelGrid>
    </a:region>


    <a:outputPanel ajaxRendered="true">


        <a:outputPanel rendered="#{resHome.idDefined}">

            <s:decorate template="/layout/seam-display.xhtml">
                <ui:define name="label">#{messages.res}</ui:define>
                 #{resHome.instance.name}(#{resHome.instance.code})
            </s:decorate>


            <a:repeat value="#{storeResFormatFilter.resFormatList}" var="_format">
                <s:decorate template="/layout/seam-display.xhtml">
                    <ui:define name="label">#{_format.formatDefine.name}</ui:define>
                    <ui:include src="/layout/erp/ResFormatVarInput.xhtml">
                        <ui:param name="format" value="#{_format}"/>
                        <ui:param name="ajaxDisable" value="true"/>
                        <ui:param name="noSelectionLabel" value="#{messages.searchNoSelectLabel}"/>
                    </ui:include>
                </s:decorate>
            </a:repeat>

            <a:outputPanel rendered="#{resHome.instance.unitGroup.type eq 'FLOAT_CONVERT'}">

                <rich:autocomplete inputClass="floatConvertRateWidth" mode="client"
                                   popupClass="floatConvertRatePopupHeight"
                                   value="#{storeResList.floatConvertRate}"
                                   layout="div"
                                   label="#{resHome.instance.unitGroup.name}#{messages.storeIn_field_floatConvertRate}"
                                   required="true"
                                   var="_value"
                                   selectFirst="false"
                                   fetchValue="#{_value}"
                                   autocompleteList="#{storeResFormatFilter.floatConvertHistoryRateList}"
                                   showButton="true" converter="javax.faces.BigDecimal">
                    <b>#{_value}</b>


                </rich:autocomplete>

                <h:outputText value="#{resHome.instance.unitGroup.name}"/>

            </a:outputPanel>

        </a:outputPanel>
    </a:outputPanel>

</ui:composition>