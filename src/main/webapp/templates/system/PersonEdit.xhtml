<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:s="http://jboss.org/schema/seam/taglib"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:a="http://richfaces.org/a4j"
                xmlns:rich="http://richfaces.org/rich">


    <h:panelGrid columns="2">

        <h:panelGrid columns="2">
            <s:decorate id="nameField" template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.person_field_name}</ui:define>
                <h:inputText id="name"
                             required="true"
                             size="20"
                             label="#{messages.person_field_name}"
                             maxlength="50" readonly="#{empty readonly?'false':readonly}"
                             value="#{personHome.instance.name}">
                    <a:ajax event="blur" render="nameField" disabled="#{empty readonly?'false':readonly}"/>
                </h:inputText>
            </s:decorate>

            <s:decorate id="sexField" template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.person_field_sex}</ui:define>
                <h:selectOneMenu id="sex" style="width:60px" disabled="#{empty readonly?'false':readonly}"
                                 label="#{messages.person_field_sex}"
                                 value="#{personHome.instance.sex}">
                    <s:selectItems var="_sex" value="#{sexs}" label="#{messages[_sex.name()]}"
                                   noSelectionLabel="#{messages.noSelectLabel}"/>
                    <s:convertEnum/>
                    <a:ajax event="valueChange" render="sexField" disabled="#{empty readonly?'false':readonly}"/>
                </h:selectOneMenu>

            </s:decorate>

            <s:decorate id="dateOfBirthField" template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.person_field_birth}</ui:define>
                <rich:calendar id="dateOfBirth" enableManualInput="true" timeZone="#{calendarBean.timeZone}"
                               locale="#{calendarBean.locale}"
                               showApplyButton="#{calendarBean.showApply}" popup="#{calendarBean.popup}"
                               value="#{personHome.instance.dateOfBirth}" datePattern="#{messages.datePattern}"/>
            </s:decorate>

            <s:decorate template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.person_field_foreign}</ui:define>
                <h:selectBooleanCheckbox label="#{messages.person_field_foreign}"
                                         value="#{personHome.instance.foreign}"
                                         disabled="#{empty readonly?'false':readonly}"/>
            </s:decorate>

            <s:decorate id="phoneField" template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.person_field_phone}</ui:define>
                <h:inputText id="phone"
                             label="#{messages.person_field_phone}"
                             size="20"
                             maxlength="50"
                             readonly="#{empty readonly?'false':readonly}"
                             value="#{personHome.instance.phone}">
                    <a:ajax event="valueChange" render="phoneField" disabled="#{empty readonly?'false':readonly}"/>
                </h:inputText>
            </s:decorate>

            <s:decorate id="ethnicField" template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.person_field_ethnic}</ui:define>
                <h:inputText id="ethnic" size="7" label="#{messages.person_field_ethnic}"
                             readonly="#{empty readonly?'false':readonly}"
                             maxlength="20"
                             value="#{personHome.instance.ethnic}">
                    <a:ajax event="blur" render="ethnicField" disabled="#{empty readonly?'false':readonly}"/>
                </h:inputText>
            </s:decorate>

            <s:decorate id="cityField" template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.person_field_city}</ui:define>
                <h:inputText id="city"
                             size="20"
                             maxlength="50"
                             readonly="#{empty readonly?'false':readonly}"
                             label="#{messages.person_field_city}"
                             value="#{personHome.instance.city}">
                    <a:ajax event="blur" render="cityField" disabled="#{empty readonly?'false':readonly}"/>
                </h:inputText>
            </s:decorate>


            <s:decorate id="nationalityField" template="/layout/edit.xhtml">
                <ui:define name="label">#{messages.person_field_nationality}</ui:define>
                <h:inputText id="nationality"
                             size="7"
                             maxlength="100"
                             readonly="#{empty readonly?'false':readonly}"
                             label="#{messages.person_field_nationality}"
                             value="#{personHome.instance.nationality}">
                    <a:ajax event="blur" render="nationalityField" disabled="#{empty readonly?'false':readonly}"/>
                </h:inputText>
            </s:decorate>

        </h:panelGrid>

        <h:graphicImage value="/img/default_picture.gif"/>

    </h:panelGrid>

    <h:panelGrid columns="1">

        <s:decorate id="addressField" template="/layout/edit.xhtml">
            <ui:define name="label">#{messages.person_field_address}</ui:define>
            <h:inputText id="address" size="70"
                         readonly="#{empty readonly?'false':readonly}"
                         label="#{messages.person_field_address}"
                         value="#{personHome.instance.address}">
                <a:ajax event="blur" listener="" render="addressField" disabled="#{empty readonly?'false':readonly}"/>
            </h:inputText>
        </s:decorate>

        <s:decorate id="nowAddressField" template="/layout/edit.xhtml">
            <ui:define name="label">#{messages.person_field_nowAddress}</ui:define>
            <h:inputText id="nowAddress"
                         label="#{messages.person_field_nowAddress}"
                         size="70" readonly="#{empty readonly?'false':readonly}"
                         value="#{personHome.instance.nowAddress}">
                <a:ajax event="blur" render="nowAddressField" disabled="#{empty readonly?'false':readonly}"/>
            </h:inputText>
        </s:decorate>

    </h:panelGrid>
</ui:composition>